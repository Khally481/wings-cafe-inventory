{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\eipfcvbjk\\\\OneDrive\\\\Desktop\\\\wings-cafe\\\\frontend\\\\src\\\\components\\\\StockManagement.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction StockManagement({\n  products,\n  transactions,\n  refreshProducts,\n  refreshTransactions\n}) {\n  _s();\n  const [message, setMessage] = useState(\"\");\n  const adjustStock = async (id, amount, type) => {\n    try {\n      const product = products.find(p => p.id === id);\n      if (!product) return;\n      const newStock = product.stock + amount;\n      if (newStock < 0) {\n        setMessage(\"Stock cannot go below 0.\");\n        return;\n      }\n\n      // Update stock\n      await fetch(`http://localhost:3001/products/${id}`, {\n        method: \"PATCH\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          stock: newStock\n        })\n      });\n\n      // Record transaction\n      await fetch(\"http://localhost:3001/transactions\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          productId: product.id,\n          productName: product.name,\n          type,\n          quantity: Math.abs(amount),\n          date: new Date().toISOString()\n        })\n      });\n\n      // Refresh state\n      await refreshProducts();\n      await refreshTransactions();\n      setMessage(`Stock ${type} recorded for ${product.name}.`);\n    } catch (error) {\n      console.error(\"Error adjusting stock:\", error);\n      setMessage(\"Error adjusting stock.\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"stock-management\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Stock Management\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this), message && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 19\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: products.map(product => /*#__PURE__*/_jsxDEV(\"li\", {\n        children: [product.name, \" - Stock: \", product.stock, /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => adjustStock(product.id, 1, \"add\"),\n          children: \"+1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => adjustStock(product.id, -1, \"deduct\"),\n          children: \"-1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 13\n        }, this)]\n      }, product.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 5\n  }, this);\n}\n_s(StockManagement, \"EiOGSxO4GWQlH0sM782nQ9JwuAs=\");\n_c = StockManagement;\nexport default StockManagement;\nvar _c;\n$RefreshReg$(_c, \"StockManagement\");","map":{"version":3,"names":["React","useState","jsxDEV","_jsxDEV","StockManagement","products","transactions","refreshProducts","refreshTransactions","_s","message","setMessage","adjustStock","id","amount","type","product","find","p","newStock","stock","fetch","method","headers","body","JSON","stringify","productId","productName","name","quantity","Math","abs","date","Date","toISOString","error","console","className","children","fileName","_jsxFileName","lineNumber","columnNumber","map","onClick","_c","$RefreshReg$"],"sources":["C:/Users/eipfcvbjk/OneDrive/Desktop/wings-cafe/frontend/src/components/StockManagement.js"],"sourcesContent":["import React, { useState } from \"react\";\r\n\r\nfunction StockManagement({ products, transactions, refreshProducts, refreshTransactions }) {\r\n  const [message, setMessage] = useState(\"\");\r\n\r\n  const adjustStock = async (id, amount, type) => {\r\n    try {\r\n      const product = products.find((p) => p.id === id);\r\n      if (!product) return;\r\n\r\n      const newStock = product.stock + amount;\r\n      if (newStock < 0) {\r\n        setMessage(\"Stock cannot go below 0.\");\r\n        return;\r\n      }\r\n\r\n      // Update stock\r\n      await fetch(`http://localhost:3001/products/${id}`, {\r\n        method: \"PATCH\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ stock: newStock }),\r\n      });\r\n\r\n      // Record transaction\r\n      await fetch(\"http://localhost:3001/transactions\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({\r\n          productId: product.id,\r\n          productName: product.name,\r\n          type,\r\n          quantity: Math.abs(amount),\r\n          date: new Date().toISOString(),\r\n        }),\r\n      });\r\n\r\n      // Refresh state\r\n      await refreshProducts();\r\n      await refreshTransactions();\r\n\r\n      setMessage(`Stock ${type} recorded for ${product.name}.`);\r\n    } catch (error) {\r\n      console.error(\"Error adjusting stock:\", error);\r\n      setMessage(\"Error adjusting stock.\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"stock-management\">\r\n      <h2>Stock Management</h2>\r\n      {message && <p>{message}</p>}\r\n\r\n      <ul>\r\n        {products.map((product) => (\r\n          <li key={product.id}>\r\n            {product.name} - Stock: {product.stock}\r\n            <button onClick={() => adjustStock(product.id, 1, \"add\")}>+1</button>\r\n            <button onClick={() => adjustStock(product.id, -1, \"deduct\")}>-1</button>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default StockManagement;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}