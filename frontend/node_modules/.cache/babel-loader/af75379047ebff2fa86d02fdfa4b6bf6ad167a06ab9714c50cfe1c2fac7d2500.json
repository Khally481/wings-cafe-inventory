{"ast":null,"code":"import _objectSpread from\"C:/Users/eipfcvbjk/AppData/Roaming/npm/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Reporting=_ref=>{let{products=[],transactions=[]}=_ref;// --- Per product sales data ---\nconst productSalesData=products.map(product=>{const productTransactions=transactions.filter(t=>String(t.productId)===String(product.id)&&t.type==='sale');const unitsSold=productTransactions.reduce((sum,t)=>sum+(Number(t.quantity)||0),0);// Use product.price because transactions don't have unitPrice\nconst revenue=unitsSold*(Number(product.price)||0);// Example: 30% profit margin\nconst profit=revenue*0.3;const stockLeft=Number(product.quantity)||0;return _objectSpread(_objectSpread({},product),{},{unitsSold,revenue,profit,stockLeft});});// --- Totals ---\nconst totalUnitsSold=productSalesData.reduce((sum,p)=>sum+p.unitsSold,0);const totalRevenue=productSalesData.reduce((sum,p)=>sum+p.revenue,0);const totalProfit=productSalesData.reduce((sum,p)=>sum+p.profit,0);const totalStockLeft=productSalesData.reduce((sum,p)=>sum+p.stockLeft,0);const totalInventoryValue=products.reduce((sum,p)=>sum+(Number(p.quantity)||0)*(Number(p.price)||0),0);const lowStockItems=products.filter(p=>Number(p.quantity)<=(Number(p.lowStockThreshold)||0));return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Reports & Analytics\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Business Summary\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"summary-item\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Total Units Sold\"}),/*#__PURE__*/_jsx(\"p\",{children:totalUnitsSold})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-item\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Total Revenue\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"M\",totalRevenue.toFixed(2)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-item\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Total Profit\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"M\",totalProfit.toFixed(2)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-item\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Total Stock Left\"}),/*#__PURE__*/_jsx(\"p\",{children:totalStockLeft})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-item\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Total Inventory Value\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"M\",totalInventoryValue.toFixed(2)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-item\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Low Stock Items\"}),/*#__PURE__*/_jsx(\"p\",{children:lowStockItems.length})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Product Performance\"}),productSalesData.length>0?/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Product\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Units Sold\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Revenue (M)\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Profit (M)\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Stock Left\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:productSalesData.sort((a,b)=>b.unitsSold-a.unitsSold).map(product=>{const isLowStock=product.stockLeft<=(Number(product.lowStockThreshold)||0);return/*#__PURE__*/_jsxs(\"tr\",{style:{backgroundColor:isLowStock?'#ffe6e6':'transparent',color:isLowStock?'#d8000c':'inherit'},children:[/*#__PURE__*/_jsx(\"td\",{children:product.name||'Unknown'}),/*#__PURE__*/_jsx(\"td\",{children:product.unitsSold}),/*#__PURE__*/_jsxs(\"td\",{children:[\"M\",product.revenue.toFixed(2)]}),/*#__PURE__*/_jsxs(\"td\",{children:[\"M\",product.profit.toFixed(2)]}),/*#__PURE__*/_jsx(\"td\",{children:product.stockLeft})]},product.id);})})]}):/*#__PURE__*/_jsx(\"p\",{children:\"No sales data available.\"})]})]});};export default Reporting;","map":{"version":3,"names":["React","jsx","_jsx","jsxs","_jsxs","Reporting","_ref","products","transactions","productSalesData","map","product","productTransactions","filter","t","String","productId","id","type","unitsSold","reduce","sum","Number","quantity","revenue","price","profit","stockLeft","_objectSpread","totalUnitsSold","p","totalRevenue","totalProfit","totalStockLeft","totalInventoryValue","lowStockItems","lowStockThreshold","children","className","toFixed","length","sort","a","b","isLowStock","style","backgroundColor","color","name"],"sources":["C:/Users/eipfcvbjk/OneDrive/Desktop/wings-cafe/frontend/src/components/Reporting.js"],"sourcesContent":["import React from 'react';\r\n\r\nconst Reporting = ({ products = [], transactions = [] }) => {\r\n  // --- Per product sales data ---\r\n  const productSalesData = products.map(product => {\r\n    const productTransactions = transactions.filter(\r\n      t => String(t.productId) === String(product.id) && t.type === 'sale'\r\n    );\r\n\r\n    const unitsSold = productTransactions.reduce(\r\n      (sum, t) => sum + (Number(t.quantity) || 0),\r\n      0\r\n    );\r\n\r\n    // Use product.price because transactions don't have unitPrice\r\n    const revenue = unitsSold * (Number(product.price) || 0);\r\n\r\n    // Example: 30% profit margin\r\n    const profit = revenue * 0.3;\r\n\r\n    const stockLeft = Number(product.quantity) || 0;\r\n\r\n    return {\r\n      ...product,\r\n      unitsSold,\r\n      revenue,\r\n      profit,\r\n      stockLeft\r\n    };\r\n  });\r\n\r\n  // --- Totals ---\r\n  const totalUnitsSold = productSalesData.reduce((sum, p) => sum + p.unitsSold, 0);\r\n  const totalRevenue = productSalesData.reduce((sum, p) => sum + p.revenue, 0);\r\n  const totalProfit = productSalesData.reduce((sum, p) => sum + p.profit, 0);\r\n  const totalStockLeft = productSalesData.reduce((sum, p) => sum + p.stockLeft, 0);\r\n  const totalInventoryValue = products.reduce(\r\n    (sum, p) => sum + ((Number(p.quantity) || 0) * (Number(p.price) || 0)),\r\n    0\r\n  );\r\n\r\n  const lowStockItems = products.filter(\r\n    p => Number(p.quantity) <= (Number(p.lowStockThreshold) || 0)\r\n  );\r\n\r\n  return (\r\n    <div>\r\n      <h2>Reports & Analytics</h2>\r\n\r\n      {/* === Summary Metrics === */}\r\n      <div className=\"card\">\r\n        <h3>Business Summary</h3>\r\n        <div className=\"summary-grid\">\r\n          <div className=\"summary-item\"><h4>Total Units Sold</h4><p>{totalUnitsSold}</p></div>\r\n          <div className=\"summary-item\"><h4>Total Revenue</h4><p>M{totalRevenue.toFixed(2)}</p></div>\r\n          <div className=\"summary-item\"><h4>Total Profit</h4><p>M{totalProfit.toFixed(2)}</p></div>\r\n          <div className=\"summary-item\"><h4>Total Stock Left</h4><p>{totalStockLeft}</p></div>\r\n          <div className=\"summary-item\"><h4>Total Inventory Value</h4><p>M{totalInventoryValue.toFixed(2)}</p></div>\r\n          <div className=\"summary-item\"><h4>Low Stock Items</h4><p>{lowStockItems.length}</p></div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* === Product Breakdown Table === */}\r\n      <div className=\"card\">\r\n        <h3>Product Performance</h3>\r\n        {productSalesData.length > 0 ? (\r\n          <table>\r\n            <thead>\r\n              <tr>\r\n                <th>Product</th>\r\n                <th>Units Sold</th>\r\n                <th>Revenue (M)</th>\r\n                <th>Profit (M)</th>\r\n                <th>Stock Left</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {productSalesData\r\n                .sort((a, b) => b.unitsSold - a.unitsSold)\r\n                .map(product => {\r\n                  const isLowStock =\r\n                    product.stockLeft <= (Number(product.lowStockThreshold) || 0);\r\n\r\n                  return (\r\n                    <tr\r\n                      key={product.id}\r\n                      style={{\r\n                        backgroundColor: isLowStock ? '#ffe6e6' : 'transparent',\r\n                        color: isLowStock ? '#d8000c' : 'inherit'\r\n                      }}\r\n                    >\r\n                      <td>{product.name || 'Unknown'}</td>\r\n                      <td>{product.unitsSold}</td>\r\n                      <td>M{product.revenue.toFixed(2)}</td>\r\n                      <td>M{product.profit.toFixed(2)}</td>\r\n                      <td>{product.stockLeft}</td>\r\n                    </tr>\r\n                  );\r\n                })}\r\n            </tbody>\r\n          </table>\r\n        ) : (\r\n          <p>No sales data available.</p>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Reporting;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}